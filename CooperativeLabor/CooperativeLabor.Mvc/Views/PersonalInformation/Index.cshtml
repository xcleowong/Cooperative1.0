
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    <script src="~/Content/VueScripts/vue.js"></script>
    <script src="~/Content/VueScripts/axios.js"></script>
</head>
<body>
    <div id="app"> 
        <table  v-show="GetPersonalInformation.length" class="table-condensed" border="1" style="width:100%">
            <tr>
                <td>序号</td>
                <td>姓名</td>
                <td>用户名</td>
                <td>性别</td>
                <td>出生日期</td>
                <td>民族</td>
                <td>用工单位</td>
                <td>合作方名称</td>
                <td>专业技术资格</td>
                <td>婚否</td>
                <td>身份证号</td>
                <td>党派</td>
                <td>邮箱</td>
                <td>岗位</td>
                <td>联系电话</td>
                <td>银行卡号</td>
                <td>开户行信息</td>
                <td>创建时间</td>
                <td>修改时间</td>
                <td>是否删除</td>
                <td>操作</td>
            </tr>
            <tr v-for="(GetPersonalInformation,index) in GetPersonalInformation">
                <td><input type="text" v-model="GetPersonalInformation.Id" /></td>
                <td><input type="text" v-model="GetPersonalInformation.Name" /></td>
                <td><input type="text" v-model="GetPersonalInformation.UserName" /></td>
                <td><input type="text" v-model="GetPersonalInformation.Gender" /></td>
                <td><input type="text" v-model="GetPersonalInformation.Birthday" /></td>
                <td><input type="text" v-model="GetPersonalInformation.Nation" /></td>
                <td><input type="text" v-model="GetPersonalInformation.Employingnit" /></td>
                <td><input type="text" v-model="GetPersonalInformation.PartnerName" /></td>
                <td><input type="text" v-model="GetPersonalInformation.ProfessionalSkill" /></td>
                <td><input type="text" v-model="GetPersonalInformation.MaritalStatus" /></td>
                <td><input type="text" v-model="GetPersonalInformation.IDNumber" /></td>
                <td><input type="text" v-model="GetPersonalInformation.PartyGroupings" /></td>
                <td><input type="text" v-model="GetPersonalInformation.Email" /></td>
                <td><input type="text" v-model="GetPersonalInformation.Post" /></td>
                <td><input type="text" v-model="GetPersonalInformation.Phone" /></td>
                <td><input type="text" v-model="GetPersonalInformation.CardNo" /></td>
                <td><input type="text" v-model="GetPersonalInformation.OpeningBank" /></td>
                <td><input type="text" v-model="GetPersonalInformation.CreationTime" /></td>
                <td><input type="text" v-model="GetPersonalInformation.ModificationTime" /></td>
                <td><input type="text" v-model="GetPersonalInformation.IsDelete" /></td>
                <td>
                    <div v-if="GetPersonalInformation.Id!=''">
                        <a href="#" v-on:click="updateContact(EntryAndExitRecord.Id,EntryAndExitRecord.PartnerName,EntryAndExitRecord.PartnerCategory,EntryAndExitRecord.BusinessLicense,EntryAndExitRecord.OperationType,EntryAndExitRecord.ApproachTime,EntryAndExitRecord.Departuretime,EntryAndExitRecord.Remark,EntryAndExitRecord.AttachmentName,EntryAndExitRecord.AttachmentPath,EntryAndExitRecord.CreationTime,EntryAndExitRecord.ModificationTime,EntryAndExitRecord.IsDelete)">修改</a>
                        <a href="#" v-on:click="deleteById(GetPersonalInformation.Id)">删除</a>

                    </div>
                    <div v-else>
                        <a href="#" v-on:click="addContact(EntryAndExitRecord.PartnerName,EntryAndExitRecord.PartnerCategory,EntryAndExitRecord.BusinessLicense,EntryAndExitRecord.OperationType,EntryAndExitRecord.ApproachTime,
                               EntryAndExitRecord.Departuretime,EntryAndExitRecord.Remark,EntryAndExitRecord.AttachmentName,EntryAndExitRecord.AttachmentPath,EntryAndExitRecord.CreationTime,EntryAndExitRecord.ModificationTime,EntryAndExitRecord.IsDelete)">添加</a>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</body>
</html>
<script type="text/javascript">
    var vm = new Vue({
        el: "#app",
        data: {
            GetPersonalInformation:[]
        },
        mounted() {
            this.GetPersonal();
        },
        methods: {
            //显示
            GetPersonal: function () {
                axios.get("http://localhost:8099/PersonalInformation/GetPersonalInformation").then(
                    (response) => {
                        console.log(response);
                        this.GetPersonalInformation = response.data;
                    },
                    (response) => {
                        alert(response.status);
                    }
                ).catch(function (response) {
                    alert(response);
                });
            },
            //删除
            deleteById: function (id) {
                axios.post('http://localhost:8099/PersonalInformation/DeletePersonalInformation?id=' + id).then(
                    (response) => {
                        this.GetPersonalInformation = response.data;
                        //for (var i = 0; i < response.data.length; i++) {
                        //    this.contactsList.push(response.data[i]);
                        //}
                        //this.contactsList.push({ Id: "", Name: "", PhoneNo: "", EmailAddress: "" });
                    },
                    (response) => {
                        alert(response.status);
                    }
                ).catch(function (response) {
                    alert(response);
                });
            },

        }
    })
</script>