
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Add</title>
    <script src="~/Content/VueScripts/vue.js"></script>
    <script src="~/Content/VueScripts/axios.js"></script>
    <link href="~/bootstrap-3.3.7-dist/bootstrap337/css/bootstrap.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
</head>
<body>
    <input type="hidden" v-model="PersonnelId"/>
    <div id="add">
        <table class="table table-hover">
            <tr>
                <td>姓名：</td>
                <td><input type="text" v-model="Name" /><input type="button" onclick="location.href='/EntryDimissionMVC/People'" value="+" /></td>
            </tr>
            <tr>
                <td>性别：</td>
                <td>
                    <input id="Radio1" type="radio" value="男" v-model="Gender" /><span>男</span>
                    <input id="Radio1" type="radio" value="女" v-model="Gender" /><span>女</span>
                </td>
            </tr>
            <tr>
                <td>身份证号：</td>
                <td><input type="text" v-model="IDNumber" /></td>
            </tr>
            <tr>
                <td>用工单位：</td>
                <td><input type="text" v-model="Employingnit" /></td>
            </tr>
            <tr>
                <td>合作方名称：</td>
                <td>
                    <select id="Select2" v-model="PartnerName">
                        <option value="请选择">--请选择--</option>
                        <option v-for="item in EntryByIdName" v-bind:value="item.PartnerName">{{item.PartnerName}}</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>操作类型：</td>
                <td>
                    c
                </td>
            </tr>
            <tr>
                <td>入职时间：</td>
                <td><input type="date" v-model="DatesEmployed" /></td>
            </tr>
            <tr>
                <td>离职时间：</td>
                <td><input type="date" v-model="DepartureTime" /></td>
            </tr>
            <tr>
                <td>创建时间：</td>
                <td><input type="date" v-model="CreationTime" /></td>
            </tr>
            <tr>
                <td>修改时间：</td>
                <td><input type="date" v-model="ModificationTime" /></td>
            </tr>
            <tr>
                <td>是否删除：</td>
                <td>
                    <input id="Radio1" type="radio" value="1" v-model="IsDelete" /><span>是</span>
                    <input id="Radio1" type="radio" value="0" v-model="IsDelete" /><span>否</span>
                </td>
            </tr>
            <tr>
                <td><a href="javascript:;" v-on:click="AddQCPlan1(Name,PersonnelId,OperationType,DatesEmployed,DepartureTime,CreationTime,ModificationTime,IsDelete)">添加</a></td>
                <td><a href="#" onclick="location.href='Index'">取消</a></td>
            </tr>
        </table>
    </div>
</body>
</html>
<script type="text/javascript">
    var vm = new Vue({
        el: "#add",
        data: {
            EntryByIdName: [],
            PartnerName: "请选择",
            //Name:"",
            //UserName: "",
            //Gender: "",
            //Birthday: "",
            //Nation: "",
            //Employingnit: "",
            //PartnerName: "",
            //ProfessionalSkill: "",
            //MaritalStatus: "",
            //IDNumber: "",
            //PartyGroupings: "",
            //Email: "",
            //Post: "",
            //Phone: "",
            //CardNo: "",
            //OpeningBank: "",
            //CreationTime: "",
            //ModificationTime: "",
            //IsDelete=1
        },

        mounted() {
            this.getEntryByIdName();
        },
        methods:
        {
            //获取合作方名称
            getEntryByIdName: function () {
                axios.get('http://localhost:8099/Partner/GetEntryByIdName').then(
                    (response) => {
                        this.EntryByIdName = [];
                        for (var i = 0; i < response.data.length; i++) {
                            this.EntryByIdName.push(response.data[i]);
                        }
                    },
                    (response) => {
                        alert(response.status);
                    }
                ).catch(function (response) {
                    alert(response);
                });
            },
            //保存
            AddQCPlan1: function (Name, PersonnelId, OperationType, DatesEmployed, DepartureTime, CreationTime, ModificationTime, IsDelete) {
                var params = new URLSearchParams();
                params.append('Name', Name);
                params.append('PersonnelId', PersonnelId);
                params.append('OperationType', OperationType);
                params.append('DatesEmployed', DatesEmployed);
                params.append('DepartureTime', DepartureTime);
                params.append('CreationTime', CreationTime);
                params.append('ModificationTime', ModificationTime);
                params.append('IsDelete', IsDelete);
                axios.post('http://localhost:8099/EntryDimission/AddEntry', params).then(
                    (response) => {
                        alert(response)
                        alert("添加成功")
                    },
                    (response) => {
                        alert(response.status);
                    }
                ).catch(function (response) {
                    alert(response);
                });
            },

        },
        computed: {
        }

    });

</script>